#!/bin/sh

VERSION=0.1
prefix=/usr/local
enable_debug=false
srcdir=`dirname $0`
test -z "$srcdir" && srcdir=.

PKG_NAME="con4"

(test -f $srcdir/configure.ac) || {
    echo -n "**Error**: Directory "\`$srcdir\'" does not look like the"
    echo " top-level $PKG_NAME directory"
    exit 1
}

#
# Setup qmake
#
QMAKE=`which qmake-qt4`
test -z $QMAKE && (echo "qmake not found"; exit 1)

#
# Option parsing
#
while test -n "$1"; do
	case "$1" in
	--prefix=*) prefix=$(echo $1 | cut -d'=' -f2) ;;
	--enable-debug) enable_debug=true ;;
	*) echo "Invalid or unrecognized option: $1"
	esac
	shift
done

#
# Debug
#
if test "x$enable_debug" != "xno"; then
	debug_config="CONFIG+=debug CONFIG+=declarative_debug"
fi

$QMAKE src/con4/con4.pro $debug_config PREFIX=$prefix

echo "
Configuration:

	Prefix:            ${prefix}
	Debug build:       ${enable_debug}
"
echo Now type \`make\' to compile $PKG_NAME || exit 1
